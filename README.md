# ğŸŸï¸ RushCoupon - ì„ ì°©ìˆœ ì¿ í° ë°œí–‰ ì„œë¹„ìŠ¤

> **Redis ë¶„ì‚° ë½**ê³¼ **ë™ì‹œì„± ì´ìŠˆ**ë¥¼ í•´ê²°í•˜ëŠ” ë°±ì—”ë“œ ì¤‘ì‹¬ì˜ ê¸°ìˆ  í¬íŠ¸í´ë¦¬ì˜¤ í”„ë¡œì íŠ¸

---

## ğŸš€ í”„ë¡œì íŠ¸ ê°œìš”

RushCouponì€ í•œì •ëœ ìˆ˜ëŸ‰ì˜ ì¿ í°ì„ ì„ ì°©ìˆœìœ¼ë¡œ ë°œê¸‰í•˜ëŠ” ì„œë¹„ìŠ¤ë¡œ, **ì‹¤ì‹œê°„ ë™ì‹œì„± ì œì–´**, **ë¶„ì‚° ë½ ì²˜ë¦¬**, ê·¸ë¦¬ê³  **íŠ¸ëœì­ì…˜ ê´€ë¦¬** ë“± ë°±ì—”ë“œ ê°œë°œìì˜ í•„ìˆ˜ì ì¸ ì‹¤ë¬´ ì—­ëŸ‰ì„ ê¹Šì´ ìˆê²Œ í•™ìŠµí•˜ê³  ì¦ëª…í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤.

---

## ğŸ”¥ ì£¼ìš” ê¸°ìˆ ì  íŠ¹ì§•

- Redisë¥¼ í™œìš©í•œ **ë¶„ì‚° ë½(Redlock)**ì„ ì‚¬ìš©í•˜ì—¬ ë™ì‹œ ìš”ì²­ ì²˜ë¦¬
- PostgreSQLì˜ **íŠ¸ëœì­ì…˜ & ë‚™ê´€ì  ë½(Optimistic Lock)**ì„ í™œìš©í•œ ë°ì´í„° ì¼ê´€ì„± ê´€ë¦¬
- Nginx ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œë¡œ ì„œë¹„ìŠ¤ ë¶€í•˜ ë¶„ì‚°
- ì‹¤ì‹œê°„ API ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§

---

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

| ë¶„ì•¼          | ê¸°ìˆ  ìŠ¤íƒ                   | ì„ íƒ ì´ìœ                               |
|---------------|-----------------------------|----------------------------------------|
| Framework     | NestJS (TypeScript)         | ì•ˆì •ì ì¸ ì•„í‚¤í…ì²˜ ë° ê°•ë ¥í•œ íƒ€ì… ì‹œìŠ¤í…œ |
| Database      | PostgreSQL                  | ê°•ë ¥í•œ ë™ì‹œì„± ì²˜ë¦¬ì™€ ì •êµí•œ ë½ ê´€ë¦¬ ì§€ì› |
| Cache & Lock  | Redis                       | ë¹ ë¥¸ ìºì‹± ë° ë¶„ì‚° ë½ ì²˜ë¦¬              |
| Infra         | Docker, Nginx               | ë¹ ë¥¸ ë°°í¬ ë° í™•ì¥ì„±                    |
| CI/CD         | GitHub Actions              | ìë™í™”ëœ í…ŒìŠ¤íŠ¸ ë° ë°°í¬                |
| Monitoring    | Prometheus, Grafana        | ì‹œìŠ¤í…œ ì„±ëŠ¥ ê´€ì¸¡ ë° ëª¨ë‹ˆí„°ë§           |

---

## ğŸ“Œ í•µì‹¬ ê¸°ëŠ¥

- âœ… **ì¿ í° ë°œê¸‰ API (ì„ ì°©ìˆœ ì œí•œ)**
- âœ… **ì¿ í° ë°œê¸‰ ìƒíƒœ ì¡°íšŒ API**
- âœ… **ì¿ í° ìƒì„± ë° ê´€ë¦¬ API (ê´€ë¦¬ììš©)**
- âœ… **ì‹¤ì‹œê°„ API ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ (Grafana)**

---

## ğŸŒ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```mermaid
graph TD

User[ì‚¬ìš©ì ìš”ì²­]

User --> Nginx

subgraph Backend
    Nginx --> NestJS
end

NestJS --> Redis
NestJS --> PostgreSQL
NestJS --> Prometheus
Prometheus --> Grafana

```

---

## ğŸ“‹ ERD êµ¬ì¡°

```mermaid
erDiagram

User ||--o{ CouponIssuance : has
Coupon ||--o{ CouponIssuance : has

User {
    int id PK
    varchar email
    varchar username
    datetime created_at
}

Coupon {
    int id PK
    varchar code
    int total_quantity
    int remaining_quantity
    datetime created_at
}

CouponIssuance {
    int id PK
    int user_id FK
    int coupon_id FK
    datetime issued_at
}

```

---

## ğŸš¦ ë™ì‹œì„± ì²˜ë¦¬ ì „ëµ

| ì´ìŠˆ | ì²˜ë¦¬ ë°©ì‹ | ë¹„ê³  |
|------|----------|------|
| ì„ ì°©ìˆœ ì¿ í° ì¤‘ë³µ ë°œê¸‰ ë°©ì§€ | Redis ë¶„ì‚° ë½(Redlock) | ë°œê¸‰ API ì§„ì… ì‹œ ë½ íšë“ |
| ì¿ í° ìˆ˜ëŸ‰ ì´ˆê³¼ ë°œê¸‰ ë°©ì§€ | PostgreSQL ë‚™ê´€ì  ë½ | íŠ¸ëœì­ì…˜ ë‚´ì—ì„œ ì¬í™•ì¸ |

---

## ğŸš¨ ì˜ˆìƒë˜ëŠ” ê¸°ìˆ ì  ë‚œì œ ë° í•´ê²° ì „ëµ

| ë‚œì œ                  | í•´ê²° ì „ëµ                          |
|-----------------------|------------------------------------|
| Redis ë½ íšë“ ì‹¤íŒ¨    | ì¬ì‹œë„ ë¡œì§ + Timeout ì„¤ì •         |
| íŠ¸ëœì­ì…˜ ì‹¤íŒ¨         | Retry ë©”ì»¤ë‹ˆì¦˜ ë„ì…                |
| ê³¼ë„í•œ Redis ë¶€í•˜     | Redis í´ëŸ¬ìŠ¤í„° ë° Replica êµ¬ì„± ê³ ë ¤ |

---

## ğŸ“Š ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ì§€í‘œ (Prometheus & Grafana)

- ì´ˆë‹¹ ì¿ í° ë°œê¸‰ ì²˜ë¦¬ëŸ‰
- API í‰ê·  ì‘ë‹µ ì‹œê°„ ë° ì—ëŸ¬ìœ¨
- Redis ë½ íšë“ ì‹œê°„ ë° ì‹¤íŒ¨ìœ¨

---

## ğŸš§ í–¥í›„ ê°œì„  ë° í™•ì¥ ì•„ì´ë””ì–´

- ë©€í‹° ì¿ í° ìœ í˜• ì§€ì›
- ì‚¬ìš©ìë³„ ì¿ í° ì‚¬ìš© í†µê³„ ì œê³µ
- ì¿ í° ë§Œë£Œ ë¡œì§ ì¶”ê°€
- Discord ì•Œë¦¼ ì—°ë™

---

## ğŸ’¡ ê¸°ëŒ€ íš¨ê³¼

- ë™ì‹œì„± ì´ìŠˆ í•´ê²° ëŠ¥ë ¥ ì¦ëª…
- ì‹¤ì œ ì„œë¹„ìŠ¤ ë°°í¬ì™€ ìœ ì‚¬í•œ ì‹¤ë¬´ ê²½í—˜ í™•ë³´
- ê°„ê²°í•˜ê³  í™•ì¥ ê°€ëŠ¥í•œ ë°±ì—”ë“œ ì•„í‚¤í…ì²˜ ì„¤ê³„ ëŠ¥ë ¥ ì…ì¦
